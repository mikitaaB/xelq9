{% extends 'layout.html' %}

{% block title %}Загрузка JSON файла{% endblock %}

{% block content %}
<h1>Загрузка JSON файла</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="file">Выберите JSON файл:</label>
        <input type="file" name="file" id="file" accept=".json" required>
    </div>
    <button type="submit">Загрузить файл</button>
</form>

{% if errors %}
<div class="errors">
    <h3>Ошибки валидации:</h3>
    <ul>
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% if success %}
<div class="format-info">
    <h3>{{ success }}</h3>
    <p><a href="/table/">Перейти к просмотру данных</a></p>
</div>
{% endif %}

<div class="format-info">
    <h3>Формат файла:</h3>
    <pre>
        [
            {
                "name": "строка менее 50 символов",
                "date": "YYYY-MM-DD_HH:mm"
            },
            ...
        ]</pre>
    <p><strong>Требования:</strong></p>
    <ul>
        <li>Файл должен содержать массив объектов</li>
        <li>Каждый объект должен содержать поля "name" и "date"</li>
        <li>Поле "name" - строка менее 50 символов</li>
        <li>Поле "date" - строка в формате YYYY-MM-DD_HH:mm</li>
        <li>Другие поля игнорируются</li>
    </ul>
</div>
{% endblock %}